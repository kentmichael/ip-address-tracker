{"version":3,"sources":["script.js"],"names":["_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError","_defineProperty","obj","value","Map","formIP","inputIP","proceedBtn","_this","this","inputInvalid","document","querySelector","param","test","concat","fetch","then","response","ok","Error","status","json","data","console","log","displayMap","style","outline","err","error","_ref","ip","location","isp","region","city","lat","lng","timezone","ipAddress","ipLocation","ipTimezone","ipISP","innerText","searchInMap","main","oldExistingMap","newDivMap","createElement","remove","setAttribute","appendChild","map","L","setView","tileLayer","attribution","maxZoom","id","tileSize","zoomOffset","accessToken","addTo","myIcon","icon","iconUrl","iconSize","iconAnchor","popupAnchor","marker","addEventListener","e","preventDefault","searchIP","displayDefault"],"mappings":"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","file":"script.js","sourcesContent":["/*\r\n  On the initial page load, the user will see their own IP\r\n  address on the map. The user can also search for any IP \r\n  addresses or domains and see the key information and location.\r\n*/\r\nclass Map{\r\n  constructor(formIP, inputIP, proceedBtn){\r\n    this.formIP = formIP;\r\n    this.inputIP = inputIP;\r\n    this.proceedBtn = proceedBtn;\r\n\r\n    formIP.addEventListener('submit', e => {e.preventDefault()});\r\n    proceedBtn.addEventListener('click', this.searchIP);\r\n  }\r\n\r\n  searchIP = () => {\r\n    const inputInvalid = document.querySelector('#input-ip');\r\n    const ip = /\\d+.\\d+.\\d+.\\d+/;\r\n    let param = '';\r\n    if(this.inputIP.value){\r\n      param = ip.test(this.inputIP.value) ? \r\n      `&ipAddress=${this.inputIP.value}` : \r\n      `&domain=${this.inputIP.value}`;\r\n    }\r\n    \r\n    fetch(`https://geo.ipify.org/api/v2/country,city?apiKey=at_qDLKzQBDXrbfWr20zJqbFAP2elzlr${param}`)\r\n    .then(response => {\r\n      if(!response.ok) throw new Error(response.status);\r\n      return response.json();\r\n    })\r\n    .then(data => {\r\n      console.log(data);\r\n      this.displayMap(data);\r\n      inputInvalid.style.outline = \"2px solid lightblue\";\r\n    })\r\n    .catch(err => {\r\n      inputInvalid.style.outline = \"2px solid hotpink\";\r\n      console.error(err);\r\n    });\r\n  }\r\n\r\n  displayMap = ({ip, location, isp}) => {\r\n    const {region, city, lat, lng, timezone} = location;\r\n    const ipAddress = document.querySelector('#ip-address');\r\n    const ipLocation = document.querySelector('#ip-location');\r\n    const ipTimezone = document.querySelector('#ip-timezone');\r\n    const ipISP = document.querySelector('#ip-isp');\r\n    ipAddress.innerText = ip;\r\n    ipLocation.innerText = `${region}, ${city}`;\r\n    ipTimezone.innerText = `UTC${timezone}`;\r\n    ipISP.innerText = isp;\r\n    this.searchInMap(lat, lng);\r\n    if(!this.inputIP.value) this.inputIP.value = ip;\r\n  }\r\n\r\n  searchInMap = (lat, lng) => {\r\n    const main = document.querySelector('main');\r\n    const oldExistingMap = document.querySelector('#map');\r\n    const newDivMap = document.createElement('div');\r\n    oldExistingMap.remove();\r\n    newDivMap.setAttribute('id', 'map');\r\n    main.appendChild(newDivMap);\r\n\r\n    let map = L.map('map').setView([lat, lng], 13);\r\n\r\n    L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {\r\n      attribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, Imagery Â© <a href=\"https://www.mapbox.com/\">Mapbox</a>',\r\n      maxZoom: 18,\r\n      id: 'mapbox/streets-v11',\r\n      tileSize: 512,\r\n      zoomOffset: -1,\r\n      accessToken: 'pk.eyJ1Ijoia2VudG1pY2hhZWwiLCJhIjoiY2wxYXFrNzYwMDBpMjNrcG03NmZibG1oaCJ9._XlkoT35F9vnidHeLvH4oQ'\r\n    }).addTo(map);\r\n\r\n    const myIcon = L.icon({\r\n      iconUrl: '../images/icon-location.svg',\r\n      iconSize: [25, 35],\r\n      iconAnchor: [22, 94],\r\n      popupAnchor: [-3, -76],\r\n    });\r\n    \r\n    L.marker([lat, lng], {icon: myIcon}).addTo(map);\r\n  }\r\n}\r\n\r\nconst formIP = document.querySelector('.input-container');\r\nconst inputIP = document.querySelector('#input-ip');\r\nconst proceedBtn = document.querySelector('#proceed-ip');\r\nconst displayDefault = new Map(formIP, inputIP, proceedBtn);\r\n\r\ndisplayDefault.searchIP();"]}